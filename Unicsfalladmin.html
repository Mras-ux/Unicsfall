<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unicsfall管理员申请系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #7C3AED;
            --accent: #10B981;
            --dark: #1F2937;
            --darker: #111827;
            --light: #F9FAFB;
            --glass: rgba(255, 255, 255, 0.08);
            --card-bg: rgba(31, 41, 55, 0.7);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--light);
            overflow-x: hidden;
            position: relative;
        }
        
        .decoration {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(rgba(139, 92, 246, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            z-index: -1;
        }
        
        .decoration-1 {
            top: 10%;
            left: 5%;
        }
        
        .decoration-2 {
            bottom: 10%;
            right: 5%;
            background: radial-gradient(rgba(16, 185, 129, 0.1) 0%, transparent 70%);
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            z-index: 1;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            animation: fadeInDown 0.8s ease;
        }
        
        .logo-container {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            width: 100px;
            height: 100px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            font-size: 2.5rem;
            color: var(--primary);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
            letter-spacing: 1px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
            font-weight: 300;
        }
        
        .tabs-container {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 8px;
            max-width: 600px;
            margin: 0 auto 40px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tab {
            padding: 14px 35px;
            cursor: pointer;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.05rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tab:hover {
            background: rgba(124, 58, 237, 0.2);
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.4);
        }
        
        .tab-content {
            display: none;
            animation: fadeInUp 0.6s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
            padding: 40px;
            margin-bottom: 30px;
            transition: all 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
        }
        
        .card-title {
            font-size: 1.8rem;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(124, 58, 237, 0.2);
            gap: 15px;
            color: var(--light);
        }
        
        .card-title i {
            color: var(--primary);
            background: rgba(124, 58, 237, 0.1);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label i {
            color: var(--primary);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(124, 58, 237, 0.3);
            border-radius: 12px;
            font-size: 1.05rem;
            transition: all 0.3s ease;
            background: rgba(31, 41, 55, 0.5);
            color: var(--light);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.2);
            background: rgba(31, 41, 55, 0.7);
        }
        
        textarea {
            min-height: 180px;
            resize: vertical;
            line-height: 1.7;
        }
        
        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 14px;
            font-size: 1.15rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20px;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(30deg);
            transition: all 0.6s;
        }
        
        .btn:hover::after {
            left: 120%;
        }
        
        .btn i {
            margin-right: 12px;
            transition: transform 0.3s ease;
        }
        
        .btn:hover i {
            transform: translateX(5px);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(124, 58, 237, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            gap: 8px;
        }
        
        .status-pending {
            background: rgba(245, 158, 11, 0.15);
            color: #FBBF24;
        }
        
        .status-approved {
            background: rgba(16, 185, 129, 0.15);
            color: #34D399;
        }
        
        .status-rejected {
            background: rgba(239, 68, 68, 0.15);
            color: #F87171;
        }
        
        .query-result {
            text-align: left;
            padding: 30px;
            background: rgba(31, 41, 55, 0.8);
            border-radius: 15px;
            margin-top: 30px;
            display: none;
            border: 1px solid rgba(124, 58, 237, 0.2);
            animation: fadeIn 0.6s ease;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }
        
        .query-code {
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: 4px;
            color: var(--primary);
            background: rgba(17, 24, 39, 0.7);
            padding: 20px 35px;
            border-radius: 15px;
            display: inline-block;
            margin: 20px 0;
            text-align: center;
            width: 100%;
            font-family: monospace;
            border: 2px dashed var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .admin-controls {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .admin-btn {
            flex: 1;
            padding: 14px 16px;
            font-size: 1.05rem;
        }
        
        .btn-success {
            background: linear-gradient(to right, var(--accent), #059669);
        }
        
        .btn-danger {
            background: linear-gradient(to right, #EF4444, #B91C1C);
        }
        
        .suggestion-item {
            border-bottom: 1px solid rgba(124, 58, 237, 0.2);
            padding: 25px 0;
        }
        
        .suggestion-item:last-child {
            border-bottom: none;
        }
        
        .suggestion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .suggestion-title {
            font-weight: 700;
            font-size: 1.3rem;
            color: white;
            flex: 1;
            min-width: 300px;
        }
        
        .suggestion-author {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .suggestion-content {
            color: #E5E7EB;
            line-height: 1.7;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(17, 24, 39, 0.5);
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            font-size: 1.05rem;
        }
        
        .code-note {
            background: rgba(245, 158, 11, 0.1);
            padding: 18px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid #FBBF24;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            padding: 20px 30px;
            border-radius: 14px;
            color: white;
            font-weight: 600;
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideIn 0.5s ease, fadeOut 0.5s ease 3s forwards;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .notification.success {
            background: linear-gradient(to right, rgba(16, 185, 129, 0.9), rgba(5, 150, 105, 0.9));
        }
        
        .notification.error {
            background: linear-gradient(to right, rgba(239, 68, 68, 0.9), rgba(185, 28, 28, 0.9));
        }
        
        @keyframes slideIn {
            from { transform: translateX(150px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            padding: 25px;
            backdrop-filter: blur(10px);
            border-radius: 15px;
            background: var(--glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-details {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px dashed rgba(124, 58, 237, 0.3);
        }
        
        .status-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
        }
        
        .status-icon {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 18px;
            flex-shrink: 0;
            font-size: 1.2rem;
        }
        
        .status-pending .status-icon {
            background: rgba(245, 158, 11, 0.2);
            color: #FBBF24;
        }
        
        .status-approved .status-icon {
            background: rgba(16, 185, 129, 0.2);
            color: #34D399;
        }
        
        .status-rejected .status-icon {
            background: rgba(239, 68, 68, 0.2);
            color: #F87171;
        }
        
        .status-text {
            font-weight: 500;
            font-size: 1.05rem;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .admin-note {
            background: rgba(239, 68, 68, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #EF4444;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        @media (max-width: 768px) {
            .card {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .tabs-container {
                max-width: 100%;
                flex-direction: column;
                padding: 10px;
            }
            
            .tab {
                padding: 15px;
                justify-content: center;
            }
            
            .admin-controls {
                flex-direction: column;
            }
            
            .suggestion-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .suggestion-title {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="decoration decoration-1"></div>
    <div class="decoration decoration-2"></div>
    
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-user-shield"></i>
                </div>
            </div>
            <h1>Unicsfall 管理员申请系统</h1>
            <p class="subtitle">申请成为平台管理员，参与社区管理，共同构建更美好的Unicsfall生态</p>
        </header>
        
        <div class="tabs-container">
            <div class="tab active" data-tab="submit">
                <i class="fas fa-file-import"></i> 提交申请
            </div>
            <div class="tab" data-tab="query">
                <i class="fas fa-search"></i> 查询状态
            </div>
            <div class="tab" data-tab="admin">
                <i class="fas fa-lock"></i> 审核管理
            </div>
        </div>
        
        <!-- 提交申请表单 -->
        <div class="tab-content active" id="submit-tab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-edit"></i> 管理员申请表单
                </h2>
                <form id="application-form">
                    <div class="form-group">
                        <label for="title">
                            <i class="fas fa-heading"></i> 申请标题 *
                        </label>
                        <input type="text" id="title" placeholder="例如：社区管理员申请" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="content">
                            <i class="fas fa-align-left"></i> 申请理由 *
                        </label>
                        <textarea id="content" placeholder="请详细说明您的申请理由、相关经验以及您能为平台带来的价值..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="author">
                            <i class="fas fa-user"></i> 申请人 *
                        </label>
                        <input type="text" id="author" placeholder="请输入您的姓名" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="contact">
                            <i class="fas fa-envelope"></i> 联系方式 *
                        </label>
                        <input type="text" id="contact" placeholder="邮箱或电话号码" required>
                    </div>
                    
                    <button type="submit" class="btn btn-block">
                        <i class="fas fa-paper-plane"></i> 提交申请
                    </button>
                </form>
            </div>
        </div>
        
        <!-- 查询状态 -->
        <div class="tab-content" id="query-tab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-search"></i> 申请状态查询
                </h2>
                <div class="form-group">
                    <label for="query-code">
                        <i class="fas fa-key"></i> 查询码 *
                    </label>
                    <input type="text" id="query-code" placeholder="请输入您的查询码" autocomplete="off">
                </div>
                <button class="btn btn-block" id="query-btn">
                    <i class="fas fa-search"></i> 查询状态
                </button>
                
                <div class="query-result" id="query-result">
                    <h3><i class="fas fa-file-alt"></i> 申请详情</h3>
                    <div id="status-info"></div>
                </div>
            </div>
        </div>
        
        <!-- 管理员界面 -->
        <div class="tab-content" id="admin-tab">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-lock"></i> 管理员登录
                </h2>
                <div class="admin-note">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>管理员凭据已通过安全渠道提供，请勿泄露给他人</span>
                </div>
                <div class="form-group">
                    <label for="admin-username">
                        <i class="fas fa-user-shield"></i> 用户名
                    </label>
                    <input type="text" id="admin-username" placeholder="请输入管理员用户名">
                </div>
                
                <div class="form-group">
                    <label for="admin-password">
                        <i class="fas fa-lock"></i> 密码
                    </label>
                    <input type="password" id="admin-password" placeholder="请输入管理员密码">
                </div>
                
                <button class="btn btn-block" id="admin-login">
                    <i class="fas fa-sign-in-alt"></i> 登录管理员面板
                </button>
            </div>
            
            <div class="card" id="admin-panel" style="display: none;">
                <h2 class="card-title">
                    <i class="fas fa-tasks"></i> 申请审核管理
                </h2>
                
                <div id="applications-list">
                    <p>正在加载申请列表...</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Unicsfall 管理员申请系统 &copy; 2023 | 我们将在3-5个工作日内处理您的申请</p>
        </footer>
    </div>
    
    <script>
        // 页面加载时初始化数据
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化localStorage数据
            if (!localStorage.getItem('applications')) {
                // 预填充一些示例数据
                const initialData = [
                    {
                        id: 1001,
                        title: "社区管理员申请",
                        content: "我有5年社区管理经验，熟悉Unicsfall平台功能，希望能为平台发展贡献力量。",
                        author: "张明",
                        contact: "zhangming@example.com",
                        status: "审核中",
                        date: "2023-06-15 10:30",
                        queryCode: "A5B8C2D9"
                    },
                    {
                        id: 1002,
                        title: "内容审核员申请",
                        content: "作为活跃用户，我熟悉平台内容规范，希望能帮助审核内容质量。",
                        author: "李华",
                        contact: "13800138000",
                        status: "审核中",
                        date: "2023-07-01 14:22",
                        queryCode: "E7F3G1H4"
                    },
                    {
                        id: 1003,
                        title: "技术支持管理员申请",
                        content: "我是一名前端开发工程师，熟悉平台技术架构，希望能帮助解决技术问题。",
                        author: "王技术",
                        contact: "wangjishu@example.com",
                        status: "审核中",
                        date: "2023-07-03 09:45",
                        queryCode: "I9J0K5L6"
                    }
                ];
                localStorage.setItem('applications', JSON.stringify(initialData));
            }
            
            // 设置管理员凭据（不在页面上显示）
            const adminUsername = "admin";
            const adminPassword = "Unicsfall@2023";
            
            // 标签切换功能
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 移除所有active类
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
                    
                    // 添加active类到当前标签
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                });
            });
            
            // 提交申请表单处理
            const applicationForm = document.getElementById('application-form');
            applicationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const title = document.getElementById('title').value;
                const content = document.getElementById('content').value;
                const author = document.getElementById('author').value;
                const contact = document.getElementById('contact').value;
                
                // 生成唯一查询码
                const queryCode = generateQueryCode();
                
                // 创建申请对象
                const application = {
                    id: Date.now(),
                    title,
                    content,
                    author,
                    contact,
                    status: "审核中",
                    date: new Date().toLocaleString('zh-CN', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    }),
                    queryCode
                };
                
                // 保存到localStorage
                const applications = JSON.parse(localStorage.getItem('applications'));
                applications.push(application);
                localStorage.setItem('applications', JSON.stringify(applications));
                
                // 显示成功通知
                showNotification('申请提交成功！', 'success');
                
                // 显示查询码
                showQueryCode(queryCode);
                
                // 重置表单
                applicationForm.reset();
            });
            
            // 查询按钮处理
            const queryBtn = document.getElementById('query-btn');
            queryBtn.addEventListener('click', function() {
                const queryCode = document.getElementById('query-code').value.trim();
                
                if (!queryCode) {
                    showNotification('请输入查询码！', 'error');
                    return;
                }
                
                const applications = JSON.parse(localStorage.getItem('applications'));
                const application = applications.find(a => a.queryCode === queryCode);
                
                if (application) {
                    const statusInfo = document.getElementById('status-info');
                    
                    let statusClass = 'status-pending';
                    if (application.status === '已通过') statusClass = 'status-approved';
                    if (application.status === '未通过') statusClass = 'status-rejected';
                    
                    // 创建状态详情HTML
                    let statusDetails = '';
                    if (application.status === '审核中') {
                        statusDetails = `
                            <div class="status-details">
                                <div class="status-item status-pending">
                                    <div class="status-icon"><i class="fas fa-clock"></i></div>
                                    <div class="status-text">您的申请正在审核中，通常需要3-5个工作日</div>
                                </div>
                            </div>
                        `;
                    } else if (application.status === '已通过') {
                        statusDetails = `
                            <div class="status-details">
                                <div class="status-item status-approved">
                                    <div class="status-icon"><i class="fas fa-check-circle"></i></div>
                                    <div class="status-text">恭喜！您的申请已通过审核，管理员将联系您进行后续操作</div>
                                </div>
                            </div>
                        `;
                    } else {
                        statusDetails = `
                            <div class="status-details">
                                <div class="status-item status-rejected">
                                    <div class="status-icon"><i class="fas fa-times-circle"></i></div>
                                    <div class="status-text">您的申请未通过审核，感谢您对Unicsfall的支持</div>
                                </div>
                            </div>
                        `;
                    }
                    
                    statusInfo.innerHTML = `
                        <div class="suggestion-item">
                            <div class="suggestion-header">
                                <div class="suggestion-title">${application.title}</div>
                                <span class="status-badge ${statusClass}">
                                    <i class="fas ${application.status === '已通过' ? 'fa-check' : application.status === '未通过' ? 'fa-times' : 'fa-clock'}"></i>
                                    ${application.status}
                                </span>
                            </div>
                            <div class="suggestion-author">
                                <i class="fas fa-user"></i> ${application.author} 
                                <i class="fas fa-clock" style="margin-left: 15px;"></i> ${application.date}
                                <i class="fas fa-envelope" style="margin-left: 15px;"></i> ${application.contact}
                            </div>
                            <div class="suggestion-content">${application.content}</div>
                            ${statusDetails}
                        </div>
                    `;
                    
                    document.getElementById('query-result').style.display = 'block';
                } else {
                    showNotification('未找到相关申请记录，请检查查询码是否正确', 'error');
                    document.getElementById('query-result').style.display = 'none';
                }
            });
            
            // 管理员登录处理
            const adminLoginBtn = document.getElementById('admin-login');
            adminLoginBtn.addEventListener('click', function() {
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                if (username === adminUsername && password === adminPassword) {
                    showNotification('管理员登录成功！', 'success');
                    document.getElementById('admin-panel').style.display = 'block';
                    loadApplicationsForAdmin();
                } else {
                    showNotification('用户名或密码错误！', 'error');
                }
            });
        });
        
        // 生成查询码的函数
        function generateQueryCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }
        
        // 显示查询码的函数
        function showQueryCode(code) {
            // 切换到查询标签页
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            
            document.querySelector('.tab[data-tab="query"]').classList.add('active');
            document.getElementById('query-tab').classList.add('active');
            
            // 显示查询码
            const queryResult = document.getElementById('query-result');
            queryResult.innerHTML = `
                <h3><i class="fas fa-check-circle"></i> 申请提交成功！</h3>
                <p>您的管理员申请已成功提交，请保存以下查询码用于跟踪申请状态：</p>
                <div class="query-code">${code}</div>
                
                <div class="status-details">
                    <div class="status-item status-pending">
                        <div class="status-icon"><i class="fas fa-clock"></i></div>
                        <div class="status-text">
                            <strong>当前状态：审核中</strong><br>
                            您的申请已进入审核队列，我们将在3-5个工作日内处理
                        </div>
                    </div>
                </div>
                
                <div class="code-note">
                    <i class="fas fa-exclamation-circle"></i>
                    <span>重要提示：此查询码只显示一次，请务必妥善保存。如遗忘将无法查询申请状态。</span>
                </div>
            `;
            queryResult.style.display = 'block';
            
            // 清空查询输入框
            document.getElementById('query-code').value = '';
        }
        
        // 为管理员加载申请列表
        function loadApplicationsForAdmin() {
            const applications = JSON.parse(localStorage.getItem('applications'));
            const applicationsList = document.getElementById('applications-list');
            
            if (applications.length === 0) {
                applicationsList.innerHTML = '<p>暂无申请记录</p>';
                return;
            }
            
            applicationsList.innerHTML = '';
            
            // 按时间倒序排序
            applications.sort((a, b) => b.id - a.id);
            
            applications.forEach(application => {
                let statusClass = 'status-pending';
                if (application.status === '已通过') statusClass = 'status-approved';
                if (application.status === '未通过') statusClass = 'status-rejected';
                
                const applicationElement = document.createElement('div');
                applicationElement.className = 'suggestion-item';
                applicationElement.innerHTML = `
                    <div class="suggestion-header">
                        <div class="suggestion-title">${application.title}</div>
                        <span class="status-badge ${statusClass}">
                            <i class="fas ${application.status === '已通过' ? 'fa-check' : application.status === '未通过' ? 'fa-times' : 'fa-clock'}"></i>
                            ${application.status}
                        </span>
                    </div>
                    <div class="suggestion-author">
                        <i class="fas fa-user"></i> ${application.author} 
                        <i class="fas fa-clock" style="margin-left: 15px;"></i> ${application.date}
                        <i class="fas fa-key" style="margin-left: 15px;"></i> ${application.queryCode}
                    </div>
                    <div class="suggestion-author">
                        <i class="fas fa-envelope"></i> ${application.contact}
                    </div>
                    <div class="suggestion-content">${application.content}</div>
                    <div class="admin-controls">
                        <button class="btn admin-btn btn-success" data-id="${application.id}" data-action="approve">
                            <i class="fas fa-check"></i> 通过
                        </button>
                        <button class="btn admin-btn btn-danger" data-id="${application.id}" data-action="reject">
                            <i class="fas fa-times"></i> 拒绝
                        </button>
                    </div>
                `;
                
                applicationsList.appendChild(applicationElement);
            });
            
            // 添加审核按钮事件监听
            document.querySelectorAll('.admin-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    const action = this.dataset.action;
                    
                    updateApplicationStatus(id, action);
                });
            });
        }
        
        // 更新申请状态
        function updateApplicationStatus(id, action) {
            const applications = JSON.parse(localStorage.getItem('applications'));
            const applicationIndex = applications.findIndex(a => a.id === id);
            
            if (applicationIndex !== -1) {
                if (action === 'approve') {
                    applications[applicationIndex].status = '已通过';
                    showNotification('申请已标记为已通过', 'success');
                } else if (action === 'reject') {
                    applications[applicationIndex].status = '未通过';
                    showNotification('申请已标记为未通过', 'success');
                }
                
                localStorage.setItem('applications', JSON.stringify(applications));
                loadApplicationsForAdmin();
            }
        }
        
        // 显示通知的函数
        function showNotification(message, type) {
            // 移除现有通知
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) existingNotification.remove();
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}
            `;
            
            document.body.appendChild(notification);
            
            // 3秒后自动移除
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    notification.remove();
                }, 500);
            }, 3000);
        }
    </script>
</body>
</html>
